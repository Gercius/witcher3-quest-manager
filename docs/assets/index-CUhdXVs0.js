(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=s(e);fetch(e.href,t)}})();function q(){const n=document.querySelector(".menu-button"),r=document.querySelectorAll(".menu-button img"),s=document.querySelector(".menu");if(!n||!s){console.error("Menu button or menu not found!");return}n.addEventListener("click",()=>{r.forEach(e=>{e.classList.toggle("hidden")});const o=s.style.right;o==="-250px"||!o?s.style.right="0px":s.style.right="-250px"})}async function y(){const n="data/quests.json";try{const r=await fetch(n);if(!r.ok)throw new Error(`Response status: ${r.status}`);return await r.json()}catch(r){console.error(r.message)}}async function k(){const n=document.querySelector("main table tbody");if(!n){console.error("Tbody not found!");return}const r=await y();for(let o=0;o<r.length;o++){const e=r[o],t=document.createElement("tr");t.setAttribute("data-id",o.toString()),t.classList.add("quest");const c=document.createElement("td");c.textContent=e.location,c.rowSpan=e.extraDetails.length||1,t.append(c);const l=document.createElement("td");l.classList.add("quest-name");const a=document.createElement("a");a.classList.add("quest-link"),a.textContent=e.questInfo.name,a.setAttribute("href",e.questInfo.hyperlink),l.append(a),l.rowSpan=e.extraDetails.length||1,t.append(l);const u=document.createElement("td");u.classList.add("quest-completed");const d=document.createElement("input");d.type="checkbox",u.append(d),u.rowSpan=e.extraDetails.length||1,t.append(u);const m=s(e.extraDetails,!0);if(t.append(m),n.append(t),e.extraDetails.length>1)for(let i=1;i<e.extraDetails.length;i++){const p=document.createElement("tr");p.setAttribute("data-id",o.toString());const g=s(e.extraDetails,!1,i);p.append(g),n.append(p)}}function s(o,e=!1,t=0){var l,a,u;const c=document.createElement("td");if(c.classList.add("extra-detail"),(l=o[e?0:t])!=null&&l.hyperlink&&o[e?0:t].description){const d=document.createElement("a");d.classList.add("extra-detail-link"),d.textContent=o[e?0:t].description,d.setAttribute("href",o[e?0:t].hyperlink),c.append(d)}else if((a=o[e?0:t])!=null&&a.hyperlink&&!o[e?0:t].description){const d=document.createElement("a");d.classList.add("extra-detail-link"),d.textContent=o[e?0:t].hyperlink,d.setAttribute("href",o[e?0:t].hyperlink),c.append(d)}else c.textContent=(u=o[e?0:t])==null?void 0:u.description;return c}}const h={get:()=>{const n=document.querySelectorAll("tr.quest"),r=[];return n.forEach(s=>{const o=s.dataset.id;if(typeof o!="string"){console.error("id must be string!");return}let t=localStorage.getItem(o)==="true";r.push({id:o||"",isCompleted:t});const c=s.querySelector(".quest-completed input");c&&(c.checked=t)}),r},save:()=>{document.querySelectorAll("tr.quest").forEach(r=>{if(typeof r.dataset.id!="string"){console.error("id must be string!");return}const e=r.querySelector(".quest-completed input").checked,t=r.dataset.id;if(!t||typeof t!="string"){console.error("Quest storage key is of incorrect type or not found!");return}localStorage.setItem(t,e.toString())})}};function f(){const n=h.get(),r=n.length,o=(n.filter(t=>t.isCompleted===!0).length/r*100).toFixed(1),e=document.querySelector(".completed-percentege");if(!e){console.error("Completed percentage showing element not found!");return}e.textContent=o}function E(){const n=document.querySelector(".hide-quests input");if(!n){console.error("hideQuestsBtn not found!");return}const r="hide-quests";let o=localStorage.getItem(r)==="true";n.checked=o,e(o),n.addEventListener("click",()=>{const t=n.checked;localStorage.setItem(r,`${t?"true":"false"}`),e(t)});function e(t){document.querySelectorAll("tbody .quest").forEach(l=>{const a=l.querySelector(".quest-completed input");if(!a){console.error("isCompletedEl not found!");return}const u=a.checked,d=l.dataset.id;document.querySelectorAll(`[data-id="${d}"]`).forEach(i=>{u&&i.classList.toggle("hidden",t)})})}}function b(n){const r=document.querySelector(".hide-quests input");if(!r){console.error("hideQuestsBtn not found!");return}if(!r.checked)return;const s=n,o=n.parentElement.parentElement;if(!o){console.log("questEl not found!");return}const e=o.dataset.id,t=s.checked;document.querySelectorAll(`[data-id="${e}"]`).forEach(l=>{t&&l.classList.toggle("hidden")})}function S(){const n=document.querySelector("table");if(!n){console.error("Table element not found!");return}f(),n.addEventListener("click",r=>{const s=r.target;if(!s){console.error("Click event not working properly");return}s.matches(".quest-completed input")&&(h.save(),f(),b(s))})}function C(){const n=document.querySelector("main"),r=document.querySelector(".theme-switch input"),s="preferred-theme";if(!n||!r){console.error("Main or toggleThemeButton not found!");return}const o=localStorage.getItem(s),e=window.matchMedia("(prefers-color-scheme: dark)").matches;o?(o==="dark"?n.classList.add("dark-theme"):n.classList.remove("dark-theme"),r.checked=o==="dark"):(e&&n.classList.add("dark-theme"),r.checked=e),r.addEventListener("click",t);function t(){if(!n||!r){console.error("Body or toggleThemeButton not found!");return}r.checked?(n.classList.add("dark-theme"),localStorage.setItem(s,"dark")):(n.classList.remove("dark-theme"),localStorage.setItem(s,"light"))}}(async function(){q(),await k(),C(),S(),E()})();(()=>{const n=document.querySelector(".export-quest-data");if(!n){console.error("Export button not found!");return}n.addEventListener("click",()=>{if(window.confirm("Export quest data?")){const o=s();r(o,"quest-data.json")}});function r(o,e="file.txt"){const t=URL.createObjectURL(o),c=document.createElement("a");c.href=t,c.download=e,document.body.appendChild(c),c.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window})),document.body.removeChild(c)}function s(){const o=document.querySelectorAll(".quest"),e=[];o.forEach(l=>{const a=l.dataset.id;let u=l.querySelector(".quest-name");const d=l.querySelector(".quest-completed input"),m={id:a||"",name:u!=null&&u.textContent?u.textContent:"",isCompleted:d?d.checked:!1};e.push(m)});const t=JSON.stringify(e,null,2);return new Blob([t],{type:"application/json"})}})();(()=>{const n=document.querySelector(".import-quest-data");if(!n){console.error("File input not found!");return}n.addEventListener("change",()=>{if(n.files&&n.files.length>0){const r=new FileReader;r.readAsText(n.files[0]),r.addEventListener("load",()=>{if(window.confirm("Import quest data?")){try{const s=r.result;if(typeof s!="string")throw new Error("Invalid file content");const o=JSON.parse(s),e=document.querySelectorAll("tbody tr.quest");o.forEach(t=>{for(const c of e){const l=c.dataset.id;let a=c.querySelector(".quest-completed input");if(!a){console.error("Checkbox not found!");return}t.id===l&&(a.checked=!!t.isCompleted)}})}catch{alert("Please import correct data")}h.save(),f()}else n.value=""})}})})();
